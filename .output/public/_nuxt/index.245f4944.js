import{a as w,r as k,o as m,b as D,e as h,t as W,F as A,f as E,u as i,c as F,h as x,i as b,j as y,w as I,k as O,l as K,m as P}from"./entry.ca2bd9c9.js";var g=(e=>(e.WeaponDamage="WeaponDamage",e.MainStat="MainStat",e.Overpower="Overpower",e.Vulnerabillity="Vulnerabillity",e.Crit="Crit",e.AllDamage="AllDamage",e.OtherBonuses="OtherBonuses",e))(g||{}),_=(e=>(e.WeaponDamage="WeaponDamage",e.MainStat="MainStat",e.CriticalStrikeChance="CriticalStrikeChance",e.CriticalStrikeDamage="CriticalStrikeDamage",e.CriticalStrikeDamageWithCore="CriticalStrikeDamageWithCore",e.CriticalStrikeDamageWithBone="CriticalStrikeDamageWithBone",e.OverpowerChance="OverpowerChance",e.OverpowerDamage="OverpowerDamage",e.VulnerabillityDamage="VulnerabillityDamage",e.AllDamage="AllDamage",e.DamageVsHealthy="DamageVsHealthy",e.DamageVsElites="DamageVsElites",e.DamageVsSlowed="DamageVsSlowed",e.DamageWhileHealthy="DamageWhileHealthy",e.DamageWithPhysical="DamageWithPhysical",e.DamageWithBone="DamageWithBone",e.DamageWithCore="DamageWithCore",e.DamageFromBloodOrb="DamageFromBloodOrb",e))(_||{});const f={WeaponDamage:{stats:["WeaponDamage"]},MainStat:{stats:["MainStat"]},Crit:{stats:["CriticalStrikeChance","CriticalStrikeDamage","CriticalStrikeDamageWithCore","CriticalStrikeDamageWithBone"]},Overpower:{stats:["OverpowerChance","OverpowerDamage"]},Vulnerabillity:{stats:["VulnerabillityDamage"]},AllDamage:{stats:["AllDamage"]},OtherBonuses:{stats:["DamageWhileHealthy","DamageWithPhysical","DamageWithBone","DamageWithCore","DamageFromBloodOrb","DamageVsElites","DamageVsHealthy","DamageVsSlowed"]}},T={class:"container"},j={class:"stats"},V=w({__name:"bucket",props:{bucketName:{type:null,required:!0},stats:{type:null,required:!0},setStatsByKey:{type:null,required:!0}},setup(e,{expose:n}){return n({BucketsDict:f}),(t,o)=>{const a=k("v-text-field");return m(),D("div",T,[h("div",null,W(e.bucketName),1),h("div",j,[(m(!0),D(A,null,E(i(f)[e.bucketName].stats,(s,c)=>(m(),F(a,{key:c,label:`${s}${[i(g).WeaponDamage,i(g).MainStat].includes(e.bucketName)?"":", %"}`,"model-value":e.stats[s],"onUpdate:modelValue":l=>e.setStatsByKey(s,l),variant:"outlined"},null,8,["label","model-value","onUpdate:modelValue"]))),128))])])}}});const q={class:"form"},L={class:"list"},J={class:"result"},B=w({__name:"stat-panel",props:{calculator:{type:null,required:!0}},setup(e,{expose:n}){const t=e,{stats:o,setStatsByKey:a,result:s}=t.calculator;return n({BucketName:g,DmgCalcBucket:V,stats:o,setStatsByKey:a,result:s}),(c,l)=>(m(),D("div",q,[h("div",L,[(m(!0),D(A,null,E(i(g),(u,r)=>(m(),F(V,{key:r,"bucket-name":u,stats:i(o),"set-stats-by-key":i(a)},null,8,["bucket-name","stats","set-stats-by-key"]))),128))]),h("div",J,"=Â "+W(i(s).toLocaleString("ru",{minimumFractionDigits:2})),1)]))}});const $="d4-calculator",U=e=>Object.keys(e),Y=e=>/^\d+$/.test(e),z=(e,n=!1)=>{try{if(typeof e=="number"||Y(e))throw null;return JSON.parse(e)}catch{return null}},R=e=>{const n=window.localStorage.getItem(e);if(n!==null){const t=z(n);if(t)return t}return U(_).reduce((t,o)=>({...t,[o]:"0"}),{})},M=e=>{const n=R(e),t=x(n),o=l=>{t.value=l,c(),window.localStorage.setItem(e,JSON.stringify(t.value))},a=(l,u)=>{isNaN(+u)||o({...t.value,[l]:u})},s=x(0),c=()=>{const l=+(t.value[_.WeaponDamage]||0),u=+(t.value[_.MainStat]||0)/10+100;console.log(u);const r=f[g.Crit].stats.reduce((d,v)=>v!==_.CriticalStrikeChance?d+ +(t.value[v]||0):d,0)/100*+(t.value[_.CriticalStrikeChance]||0)+100,p=+(t.value[_.OverpowerDamage]||0)/100*+(t.value[_.OverpowerChance]||0)+100,C=+(t.value[_.VulnerabillityDamage]||0)+100,S=f[g.AllDamage].stats.reduce((d,v)=>d+ +(t.value[v]||0),0)+100,H=f[g.OtherBonuses].stats.reduce((d,v)=>d+ +(t.value[v]||0),0)+100;s.value=l*(u/100)*(r/100)*(p/100)*(C/100)*(S/100)*(H/100)};return c(),{stats:t,setStats:o,setStatsByKey:a,calculate:c,result:s}},G={class:"panels-container"},Q={class:"diff-container"},X=w({__name:"index",setup(e,{expose:n}){const t=`${$}::stats`,o=`${$}::stats-compare`,a=[M(t),M(o)],s=b(()=>{const r=a[0].result.value,p=a[1].result.value;return!r||!r&&!p?0:(p-r)/(r/100)}),c=b(()=>{const r=s.value.toFixed(2);return s.value>0?`+${r}`:r}),l=b(()=>s.value>0?"green":s.value<0?"red":"inherit"),u=()=>{a[1].setStats(a[0].stats.value)};return n({calculators:a,stringDiff:c,diffColor:l}),(r,p)=>{const C=k("v-icon"),S=k("v-btn");return m(),D("div",G,[y(B,{calculator:a[0]},null,8,["calculator"]),y(S,{variant:"outlined",class:"move-button",onclick:u},{default:I(()=>[y(C,{title:"Move stats from left side",icon:"mdi-arrow-right"})]),_:1}),y(B,{calculator:a[1]},null,8,["calculator"]),h("div",Q,[O("Diff: "),h("span",{style:K(`color: ${i(l)};`)},W(i(c)),5),O(" % ")])])}}});const Z={class:"root"},N={__name:"index",setup(e){return(n,t)=>(m(),D("div",Z,[y(i(X))]))}},te=P(N,[["__scopeId","data-v-3f8cf15d"]]);export{te as default};
