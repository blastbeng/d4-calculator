import{r as b,o as D,a as h,b as p,t as w,F as B,e as M,c as A,u as m,f as E,h as k,i as S,j as f,w as j,k as V,l as T,m as L}from"./entry.4c053b46.js";var i=(e=>(e.WeaponDamage="WeaponDamage",e.MainStat="MainStat",e.Overpower="Overpower",e.Vulnerabillity="Vulnerabillity",e.Crit="Crit",e.While="While",e.With="With",e.From="From",e.Vs="Vs",e.AllDamage="AllDamage",e))(i||{}),g=(e=>(e.WeaponDamage="WeaponDamage",e.MainStat="MainStat",e.CriticalStrikeChance="CriticalStrikeChance",e.CriticalStrikeDamage="CriticalStrikeDamage",e.CriticalStrikeDamageWithCore="CriticalStrikeDamageWithCore",e.CriticalStrikeDamageWithBone="CriticalStrikeDamageWithBone",e.OverpowerChance="OverpowerChance",e.OverpowerDamage="OverpowerDamage",e.VulnerabillityDamage="VulnerabillityDamage",e.AllDamage="AllDamage",e.DamageVsHealthy="DamageVsHealthy",e.DamageVsElites="DamageVsElites",e.DamageVsSlowed="DamageVsSlowed",e.DamageWhileHealthy="DamageWhileHealthy",e.DamageWithPhysical="DamageWithPhysical",e.DamageWithBone="DamageWithBone",e.DamageWithCore="DamageWithCore",e.DamageFromBloodOrb="DamageFromBloodOrb",e))(g||{});const v={WeaponDamage:{stats:["WeaponDamage"]},MainStat:{stats:["MainStat"]},Crit:{stats:["CriticalStrikeChance","CriticalStrikeDamage","CriticalStrikeDamageWithCore","CriticalStrikeDamageWithBone"]},Overpower:{stats:["OverpowerChance","OverpowerDamage"]},Vulnerabillity:{stats:["VulnerabillityDamage"]},While:{stats:["DamageWhileHealthy"]},With:{stats:["DamageWithPhysical","DamageWithBone","DamageWithCore"]},From:{stats:["DamageFromBloodOrb"]},Vs:{stats:["DamageVsElites","DamageVsHealthy","DamageVsSlowed"]},AllDamage:{stats:["AllDamage"]}};const J={class:"container"},U={class:"stats"},x={__name:"bucket",props:{bucketName:i,stats:Object,setStatsByKey:Function},setup(e,{expose:n}){return n({BucketsDict:v}),(t,u)=>{const s=b("v-text-field");return D(),h("div",J,[p("div",null,w(e.bucketName),1),p("div",U,[(D(!0),h(B,null,M(m(v)[e.bucketName].stats,(a,_)=>(D(),A(s,{key:_,label:`${a}${[m(i).WeaponDamage,m(i).MainStat].includes(a)?"":", %"}`,"model-value":e.stats[a],"onUpdate:modelValue":c=>e.setStatsByKey(a,c),variant:"outlined"},null,8,["label","model-value","onUpdate:modelValue"]))),128))])])}}},Y={class:"form"},q={class:"list"},z={class:"result"},O=E({__name:"stat-panel",props:{calculator:{type:null,required:!0}},setup(e,{expose:n}){const t=e,{stats:u,setStatsByKey:s,result:a}=t.calculator;return n({BucketName:i,DmgCalcBucket:x,stats:u,setStatsByKey:s,result:a}),(_,c)=>(D(),h("div",Y,[p("div",q,[(D(!0),h(B,null,M(m(i),(d,r)=>(D(),A(x,{key:r,"bucket-name":d,stats:m(u),"set-stats-by-key":m(s)},null,8,["bucket-name","stats","set-stats-by-key"]))),128))]),p("div",z,"=Â "+w(m(a).toLocaleString("ru",{minimumFractionDigits:2})),1)]))}});const $="d4-calculator",R=e=>Object.keys(e),G=e=>/^\d+$/.test(e),Q=(e,n=!1)=>{try{if(typeof e=="number"||G(e))throw null;return JSON.parse(e)}catch{return null}},X=e=>{const n=window.localStorage.getItem(e);if(n!==null){const t=Q(n);if(t)return t}return R(g).reduce((t,u)=>({...t,[u]:"0"}),{})},F=e=>{const n=X(e),t=k(n),u=c=>{t.value=c,_(),window.localStorage.setItem(e,JSON.stringify(t.value))},s=(c,d)=>{isNaN(+d)||u({...t.value,[c]:d})},a=k(0),_=()=>{const c=+(t.value[g.WeaponDamage]||0),d=+(t.value[g.MainStat]||0)/10+100,r=v[i.Crit].stats.reduce((l,o)=>o!==g.CriticalStrikeChance?l+ +(t.value[o]||0):l,0)/100*+(t.value[g.CriticalStrikeChance]||0)+100,y=+(t.value[g.OverpowerDamage]||0)/100*+(t.value[g.OverpowerChance]||0)+100,C=+(t.value[g.VulnerabillityDamage]||0)+100,W=v[i.While].stats.reduce((l,o)=>l+ +(t.value[o]||0),0)+100,H=v[i.With].stats.reduce((l,o)=>l+ +(t.value[o]||0),0)+100,I=v[i.From].stats.reduce((l,o)=>l+ +(t.value[o]||0),0)+100,K=v[i.Vs].stats.reduce((l,o)=>l+ +(t.value[o]||0),0)+100,P=v[i.AllDamage].stats.reduce((l,o)=>l+ +(t.value[o]||0),0)+100;a.value=c*(d/100)*(r/100)*(y/100)*(C/100)*(W/100)*(H/100)*(I/100)*(K/100)*(P/100)};return _(),{stats:t,setStats:u,setStatsByKey:s,calculate:_,result:a}},Z={class:"panels-container"},N={class:"diff-container"},ee=E({__name:"index",setup(e,{expose:n}){const t=`${$}::stats`,u=`${$}::stats-compare`,s=[F(t),F(u)],a=S(()=>{const r=s[0].result.value,y=s[1].result.value;return!r||!r&&!y?0:(y-r)/(r/100)}),_=S(()=>{const r=a.value.toFixed(2);return a.value>0?`+${r}`:r}),c=S(()=>a.value>0?"green":a.value<0?"red":"inherit"),d=()=>{s[1].setStats(s[0].stats.value)};return n({calculators:s,stringDiff:_,diffColor:c}),(r,y)=>{const C=b("v-icon"),W=b("v-btn");return D(),h("div",Z,[f(O,{calculator:s[0]},null,8,["calculator"]),f(W,{variant:"outlined",class:"move-button",onclick:d},{default:j(()=>[f(C,{title:"Move stats from left side",icon:"mdi-arrow-right"})]),_:1}),f(O,{calculator:s[1]},null,8,["calculator"]),p("div",N,[V("Diff: "),p("span",{style:T(`color: ${m(c)};`)},w(m(_)),5),V(" % ")])])}}});const te={class:"root"},ae={__name:"index",setup(e){return(n,t)=>(D(),h("div",te,[f(m(ee))]))}},ne=L(ae,[["__scopeId","data-v-3f8cf15d"]]);export{ne as default};
