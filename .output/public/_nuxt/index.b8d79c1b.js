import{r as B,o as m,a as d,b as h,t as C,F as W,e as b,c as S,u,f as y,h as $,i as A}from"./entry.3bd59ddc.js";var r=(e=>(e.WeaponDamage="WeaponDamage",e.MainStat="MainStat",e.Overpower="Overpower",e.Vulnerabillity="Vulnerabillity",e.Crit="Crit",e.While="While",e.With="With",e.From="From",e.Vs="Vs",e.AllDamage="AllDamage",e))(r||{}),n=(e=>(e.WeaponDamage="WeaponDamage",e.MainStat="MainStat",e.CriticalStrikeChance="CriticalStrikeChance",e.CriticalStrikeDamage="CriticalStrikeDamage",e.CriticalStrikeDamageWithCore="CriticalStrikeDamageWithCore",e.CriticalStrikeDamageWithBone="CriticalStrikeDamageWithBone",e.OverpowerChance="OverpowerChance",e.OverpowerDamage="OverpowerDamage",e.VulnerabillityDamage="VulnerabillityDamage",e.AllDamage="AllDamage",e.DamageVsHealthy="DamageVsHealthy",e.DamageVsElites="DamageVsElites",e.DamageVsSlowed="DamageVsSlowed",e.DamageWhileHealthy="DamageWhileHealthy",e.DamageWithPhysical="DamageWithPhysical",e.DamageWithBone="DamageWithBone",e.DamageFromBloodOrb="DamageFromBloodOrb",e))(n||{});const c={WeaponDamage:{stats:["WeaponDamage"]},MainStat:{stats:["MainStat"]},Crit:{stats:["CriticalStrikeChance","CriticalStrikeDamage","CriticalStrikeDamageWithCore","CriticalStrikeDamageWithBone"]},Overpower:{stats:["OverpowerChance","OverpowerDamage"]},Vulnerabillity:{stats:["VulnerabillityDamage"]},While:{stats:["DamageWhileHealthy"]},With:{stats:["DamageWithPhysical","DamageWithBone"]},From:{stats:["DamageFromBloodOrb"]},Vs:{stats:["DamageVsElites","DamageVsHealthy","DamageVsSlowed"]},AllDamage:{stats:["AllDamage"]}};const M={class:"container"},H={class:"stats"},p={__name:"bucket",props:{bucketName:r,stats:Object,setStatsByKey:Function},setup(e,{expose:a}){return a({BucketsDict:c}),(i,D)=>{const o=B("v-text-field");return m(),d("div",M,[h("div",null,C(e.bucketName),1),h("div",H,[(m(!0),d(W,null,b(u(c)[e.bucketName].stats,(l,g)=>(m(),S(o,{key:g,label:`${l}${[u(r).WeaponDamage,u(r).MainStat].includes(l)?"":", %"}`,"model-value":e.stats[l],"onUpdate:modelValue":_=>e.setStatsByKey(l,_),variant:"outlined"},null,8,["label","model-value","onUpdate:modelValue"]))),128))])])}}},E=e=>Object.keys(e),I=e=>/^\d+$/.test(e),K=(e,a=!1)=>{try{if(typeof e=="number"||I(e))throw null;return JSON.parse(e)}catch{return null}},j="d4-calculator",w=`${j}::stats`,P=()=>{const e=window.localStorage.getItem(w);if(e!==null){const a=K(e);if(a!==null)return a}return E(n).reduce((a,i)=>({...a,[i]:"0"}),{})},L=()=>{const e=y(P()),a=l=>{e.value=l},i=(l,g)=>{isNaN(+g)||(a({...e.value,[l]:g}),o(),window.localStorage.setItem(w,JSON.stringify(e.value)))},D=y("0"),o=()=>{const l=+(e.value[n.WeaponDamage]||0),g=+(e.value[n.MainStat]||0)/10+100,_=c[r.Crit].stats.reduce((t,s)=>s!==n.CriticalStrikeChance?t+ +(e.value[s]||0):t,0)/100*+(e.value[n.CriticalStrikeChance]||0)+100,v=+(e.value[n.OverpowerDamage]||0)/100*+(e.value[n.OverpowerChance]||0)+100,V=+(e.value[n.VulnerabillityDamage]||0)+100,k=c[r.While].stats.reduce((t,s)=>t+ +(e.value[s]||0),0)+100,f=c[r.With].stats.reduce((t,s)=>t+ +(e.value[s]||0),0)+100,x=c[r.From].stats.reduce((t,s)=>t+ +(e.value[s]||0),0)+100,O=c[r.Vs].stats.reduce((t,s)=>t+ +(e.value[s]||0),0)+100,F=c[r.AllDamage].stats.reduce((t,s)=>t+ +(e.value[s]||0),0)+100;D.value=(l*(g/100)*(_/100)*(v/100)*(V/100)*(k/100)*(f/100)*(x/100)*(O/100)*(F/100)).toFixed(2)};return o(),{stats:e,setStats:a,setStatsByKey:i,calculate:o,result:D}};const J={class:"form"},T={class:"list"},U={class:"result"},q={__name:"index",setup(e,{expose:a}){const{stats:i,setStatsByKey:D,result:o}=L();return a({BucketName:r,DmgCalcBucket:p,stats:i,setStatsByKey:D,result:o}),(l,g)=>(m(),d("div",J,[h("div",T,[(m(!0),d(W,null,b(u(r),(_,v)=>(m(),S(p,{key:v,"bucket-name":_,stats:u(i),"set-stats-by-key":u(D)},null,8,["bucket-name","stats","set-stats-by-key"]))),128))]),h("div",U,"=Â "+C(u(o)),1)]))}};const z={class:"root"},G={class:"calcs-container"},Q={__name:"index",setup(e){return(a,i)=>(m(),d("div",z,[h("div",G,[A(u(q))])]))}},X=$(Q,[["__scopeId","data-v-73e7ae40"]]);export{X as default};
